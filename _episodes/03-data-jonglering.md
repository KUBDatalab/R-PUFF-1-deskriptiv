---
# Please do not edit this file directly; it is auto generated.
# Instead, please edit 03-data-jonglering.md in _episodes_rmd/
title: "At jonglere med data"
teaching: 10
exercises: 5
questions:
- "FIXME"
objectives:
- "FIXME"
keypoints:
- "FIXME"
source: Rmd
---



Meget af det vi skal - foretage statistiske test, bygge modeller, lave tabeller.
Al den slags, er superlet. 
Det svære er at finde ud af hvilken test vi vil foretage, eller hvilken model vi
vil bygge. Det er også svært at tolke data. Men når først vi har fundet ud af hvad
vi vil - så er det ret let. Vi skal "bare" finde den funktion der gør arbejdet for
os. Og så skal vi have jongleret data til at have den form som funktionen tager imod.


Det ser vi på i dette modul.

Vi har noget data. Hvad kan vi forestille os at man kan gøre med det?

Data kommer i rækker og kolonner.

I rækkerne har vi observationer. I kolonnerne har vi variable.

Nogen af variablene beskriver grupper af observationer. Det kan de i princippet
alle gøre. Men nogen af dem giver mere mening end andre.

Så. Vi kan have lyst til kun at se på bestemte observationer, baseret på hvilke
værdier de har af bestemte variable.

Vi kan have lyst til kun at se på bestemte kolonner (det gør vi som regel for at
få noget der er mere overskueligt, stort set alt hvad vi laver er ligeglade med 
hvor mange overflødige kolonner vi har).

Vi kan have lyst til at lave en ny kolonne, baseret på hvad der er i de eksisterende
kolonner. En variant er at den nye kolonne vi laver i virkeligheden erstatter en
af de eksisterende.

Og så kan vi have lyst til at opsummere værdierne i en kolonne, for eksempelvis at få
gennemsnit eller standardafvigelse. Og vi kan have lyst til at gøre det for flere 
grupper.

Hvordan gør vi det?

### Pipen

Når vi manipulerer data, skal vi ofte foretage mere end en handling.

Først udvælger vi bestemte kolonner, så udvælger vi bestemte rækker osv


~~~
mellemregning_1 <- select(data, )
mellemregning_2 <- filter(mellemregning_1)
~~~
{: .language-r}

Skal vi foretage mere end et par behandlinger af datasæt, kan vi hurtigt få 
mange mellemregninger. Og det er forvirrende.

Hvis vi havde en måde at sende resultatet af den første manipulation videre til
det næste trin, uden at skulle gemme resultatet undervejs, ville vi kunne spare
en del kode, og minimere forvirringen.

Og hvis vi har et antal funktioner, der alle skal bruge en dataframe som deres
første argument. Og returnerer en dataframe. Så kan vi hægte disse funktioner
sammen. Til det bruger vi pipen: %>% 

Pipen, %>%, tager resultatet af hvad er er på venstre side, og sender det videre
til den funktion der er på højre side. Det tillader os at lave kæder af 
funktioner, der samlet manipulerer vores data.

> ## Er der ikke en nyere pipe?
> Pipen kommer oprindeligt fra pakken magrittr. Der er andre nyttige
> udgaver af pipen i samme pakke, men den mest brugte er %>%. Den er så nyttig,
> at base-R, R uden nogen pakker, har introduceret sin egen udgave: |>
> I default installationen af RStudio, er %>% tilgængelig med genvejstasten
> ctrl-shift-m. Indtil default indstillingerne i RStudio bliver ændre, arbejder
> vi med Magrittr pipen, og ikke base-R pipen.
{.callout}


## Datamanipulation med Tidyverse

Pakken Tidyverse indeholder en række andre pakker, der alle er karakteriseret
ved at de arbejder godt med pipen. Alle funktioner har som deres første argument
en dataframe, og returnerer selv en dataframe. Det betyder, at vi kan 
hægte funktionerne sammen med pipen.

Når vi manipulerer data, er det særligt den del af tidyverse der hedder dplyr vi
bruger. 

### Udvælge kolonner

### Udvælge rækker

### Lave nye kolonner baseret på eksisterende

### Opsummering af data i kolonner

### Grupper dataframes




{% include links.md %}
