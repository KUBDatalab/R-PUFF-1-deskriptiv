---
title: "Multipel lineær regression - og polynomisk"
teaching: 10
exercises: 5
questions:
- "Hvordan fitter jeg lineære modeller af mere end en parameter?"
- "Hvordan fitter jeg polynomiske modeller?"
objectives:
- "FIXME"
keypoints:
- "FIXME"
source: Rmd
math: yes
---

```{r, include = FALSE}
source("../bin/chunk-options.R")
knitr_fig_path("05-")
# source("../bin/download_data.R")
library(tidyverse)
```

# NB R-eksempler til modul 3 - ikke færdig!

## Multipel lineær regression
Vi har ikke taget stilling til hvilket datasæt der skal bruges som eksempel. 
Men kommer nok til at køre ca. samme model som øvelserne i forrige modul:

1. sådan gør du
2. gør det selv med et andet datasæt

Eksempelkode baserer sig aktuelt på mtcars datasættet.

Den multiple lineære regression opbygges på samme måde som den simple 
lineære regression. Formelnotationen er den samme. Nu er der blot flere
forklarende variable, der hver i sær tilføjes med et `+`:

```{r}
model <- lm(mpg ~ cyl + hp + wt, data = mtcars)
```

Det direkte output af modellen er en smule mere kompliceret:

```{r}
model
```
Dette kan vi tolke som, at `mpg`, miles pr gallon kan beskrives som:

$$ mpg = 38.75179 - 0.94162 * cyl - 0.01804 * hp - 3.16697 * wt$$ 
Jo flere hestekræfter, jo dårligere brændstoføkonomi. Jo tungere bil, jo dårligere
brændstoføkonomi. Men også dårligere brændstoføkonomi når bilen har flere cylindre.

Antallet af cylindre er teknisk set en kategorisk værdi. Bilmotorer kan have 
4, 6 eller 8 cylindre. Der er langt mellem de forbrændingsmotorer der har 5 cylindre.
Men der er ingen der har 4,3 cylindre. Der er også en sammenhæng mellem motorens
størrelse og antallet af cylindre. Og derfor "blander" vi de to parametre, cyl og hp.

Det er dårlig praksis...

Det mere detaljerede output af modellen får vi med `summary()` funktionen:

```{r}
summary(model)
```
Det er også lidt længere end vi ellers har set - for der er flere 
parametre at estimere.

```{r}
confint(model)
```
Vi kan også plotte modellen:
```{r}
plot(model)
```

Det giver os residualerne. De bør være tilfældige.

## Polynomial regression

{% include links.md %}
